"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.startAllIntervalJobs = exports.createJob = void 0;
const extra_1 = require("./extra");
function createJob(interval, run) {
    return { interval, run };
}
exports.createJob = createJob;
function startAllIntervalJobs(jobs) {
    for (const [, { interval, run }] of (0, extra_1.getEntries)(jobs)) {
        if (interval.fixed) {
            setInterval(run, interval.fixed);
            continue;
        }
        else if (interval.random) {
            const { min, max } = interval.random;
            const loop = () => {
                const random = Math.floor(Math.random() * (max - min + 1) + min);
                return setTimeout(() => {
                    run();
                    loop();
                }, random);
            };
            loop();
        }
    }
}
exports.startAllIntervalJobs = startAllIntervalJobs;
